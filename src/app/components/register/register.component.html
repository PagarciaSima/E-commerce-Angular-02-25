<div class="container">
    <div class="card mt-5 px-5 py-3 text-success shadow bg-white rounded">
        <div class="text-center"><h2><i class="fa-solid fa-user-plus text-secondary me-3"></i>Register</h2></div>
        <form class="mt-3" #registerForm="ngForm" (ngSubmit)="register(registerForm)" novalidate>
            
            <input class="form-control mb-3" 
                type="text" 
                name="userName" 
                id="userName" 
                placeholder="Enter your username" 
                [(ngModel)]="user.userName" 
                required 
                pattern="^\S{4,}$"
                minlength="4" 
                #userNameField="ngModel">
                
            <!-- Mostrar mensaje de error cuando el nombre de usuario sea corto -->
            <div *ngIf="userNameField.errors?.['pattern'] && userNameField.dirty" class="alert alert-danger mt-2 py-2">
                Username must be at least 4 characters long and cannot have spaces.
            </div>

            <input class="form-control mb-3" 
                type="text" 
                name="userFirstName" 
                id="userFirstName" 
                placeholder="Enter your first name" 
                [(ngModel)]="user.userFirstName" 
                required 
                #firstNameField="ngModel">
            <div *ngIf="firstNameField.invalid && (firstNameField.dirty || firstNameField.touched)" class="alert alert-danger mt-2 py-2">
                First name is required.
            </div>

            <input class="form-control mb-3" 
                type="text" 
                name="userLastName" 
                id="userLastName" 
                placeholder="Enter your last name" 
                [(ngModel)]="user.userLastName" 
                required 
                #lastNameField="ngModel">
            <div *ngIf="lastNameField.invalid && (lastNameField.dirty || lastNameField.touched)" class="alert alert-danger mt-2 py-2">
                Last name is required.
            </div>

            <input class="form-control mb-3" 
                type="password"  
                name="userPassword" 
                id="userPassword" 
                placeholder="Enter your password" 
                [(ngModel)]="user.userPassword" 
                required 
                minlength="8"
                pattern="^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=!])\S{8,}$"
                #userPasswordField="ngModel"
            >

            <!-- Mostrar el mensaje de error de inmediato sin esperar a touched -->
            <div *ngIf="userPasswordField.errors?.['pattern'] && userPasswordField.dirty" class="alert alert-danger mt-2 py-2">
                <div class="fw-bold mb-2">Password must contain:</div>
                <ul>
                    <li>At least one digit</li>
                    <li>At least one lowercase letter</li>
                    <li>At least one uppercase letter</li>
                    <li>At least one special character (&#64; # $ % ^ &amp; + = !)</li>
                    <li>No spaces</li>
                </ul>
            </div>

            <div class="d-flex justify-content-center mt-4">
                <button type="submit" class="btn btn-success mb-3 mx-auto" [disabled]="registerForm.invalid">
                    <i class="fa-solid fa-user-check me-2"></i>Register
                </button>
            </div>

            <div class="text-center">
                <span>Already have an account? 
                    <a routerLink="/login" class="text-success">Login</a>
                </span>
            </div>
        </form>
    </div>
</div>

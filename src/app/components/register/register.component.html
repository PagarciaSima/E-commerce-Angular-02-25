<div class="container">
    <div class="card mt-5 px-5 py-3 text-success shadow bg-white rounded">
        <div class="text-center">
            <h2><i class="fa-solid fa-user-plus text-secondary me-3"></i>{{ 'Register.Header' | translate }}</h2>
        </div>
        <form class="mt-3" #registerForm="ngForm" (ngSubmit)="register(registerForm)" novalidate>
            
            <input class="form-control mb-3" type="text" name="userName" id="userName" 
                placeholder="{{ 'Register.Username.placeholder' | translate }}" [(ngModel)]="user.userName" required 
                pattern="^\S{4,}$" minlength="4" #userNameField="ngModel"
            >
                
            <!-- Mostrar mensaje de error cuando el nombre de usuario sea corto -->
            <div *ngIf="userNameField.errors?.['pattern'] && userNameField.dirty" class="alert alert-danger mt-2 py-2">
                {{ 'Register.Username.validation' | translate }}
            </div>

            <input class="form-control mb-3" type="text" name="userFirstName" id="userFirstName" 
                placeholder="{{ 'Register.FirstName.placeholder' | translate }}" [(ngModel)]="user.userFirstName" required #firstNameField="ngModel"
            >
            <div *ngIf="firstNameField.invalid && (firstNameField.dirty || firstNameField.touched)" class="alert alert-danger mt-2 py-2">
                {{ 'Register.FirstName.required' | translate }}
            </div>

            <input class="form-control mb-3" type="text" name="userLastName"  id="userLastName" 
                placeholder="{{ 'Register.LastName.placeholder' | translate }}Enter your last name" [(ngModel)]="user.userLastName" 
                required #lastNameField="ngModel"
            >
            <div *ngIf="lastNameField.invalid && (lastNameField.dirty || lastNameField.touched)" class="alert alert-danger mt-2 py-2">
                {{ 'Register.LastName.required' | translate }}
            </div>

            <input class="form-control mb-3" type="password"  name="userPassword" id="userPassword" 
                placeholder="{{ 'Register.Password.placeholder' | translate }}" [(ngModel)]="user.userPassword" 
                required minlength="8" pattern="^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=!])\S{8,}$"
                #userPasswordField="ngModel"
            >

            <!-- Mostrar el mensaje de error de inmediato sin esperar a touched -->
            <div *ngIf="userPasswordField.errors?.['pattern'] && userPasswordField.dirty" class="alert alert-danger mt-2 py-2">
                <div class="fw-bold mb-2">{{ 'Register.Password.validation.div' | translate }}</div>
                <ul>
                    <li>{{ 'Register.Password.validation.li1' | translate }}</li>
                    <li>{{ 'Register.Password.validation.li2' | translate }}</li>
                    <li>{{ 'Register.Password.validation.li3' | translate }}</li>
                    <li>{{ 'Register.Password.validation.li4' | translate }}</li>
                    <li>{{ 'Register.Password.validation.li5' | translate }}</li>
                </ul>
            </div>

            <div class="d-flex justify-content-center mt-4">
                <button type="submit" class="btn btn-success mb-3 mx-auto" [disabled]="registerForm.invalid">
                    <i class="fa-solid fa-user-check me-2"></i>{{ 'Register.RegisterButton' | translate }}
                </button>
            </div>

            <div class="text-center">
                <span>{{ 'Register.AccountQuestion' | translate }}
                    <a routerLink="/login" class="text-success">Login</a>
                </span>
            </div>
        </form>
    </div>
</div>
